name: .NET CI/CD Pipeline

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build-and-test:
    runs-on: ubuntu-latest
    
    steps:
    - name: üì• –ó–∞–≥—Ä—É–∂–∞—é –∫–æ–¥
      uses: actions/checkout@v4
      
    - name: ‚öôÔ∏è –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é .NET 8
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: '8.0'
    
    - name: üì¶ –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
      run: |
        echo "–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç..."
        dotnet restore MyApp.csproj
        echo "–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç..."
        dotnet restore MyApp.Tests.csproj
    
    - name: üèóÔ∏è –°–æ–±–∏—Ä–∞—é –ø—Ä–æ–µ–∫—Ç—ã
      run: |
        echo "–°–æ–±–∏—Ä–∞—é –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ..."
        dotnet build MyApp.csproj --configuration Release --no-restore
        echo "–°–æ–±–∏—Ä–∞—é —Ç–µ—Å—Ç—ã..."
        dotnet build MyApp.Tests.csproj --configuration Release --no-restore
    
    - name: üß™ –ó–∞–ø—É—Å–∫–∞—é —Ç–µ—Å—Ç—ã
      run: |
        echo "–ó–∞–ø—É—Å–∫–∞—é unit-—Ç–µ—Å—Ç—ã..."
        dotnet test MyApp.Tests.csproj --no-build --verbosity normal
        echo "‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã!"
    
    - name: üöÄ –ó–∞–ø—É—Å–∫–∞—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
      run: |
        echo "–ó–∞–ø—É—Å–∫–∞—é –ø—Ä–æ–≥—Ä–∞–º–º—É..."
        dotnet run --project MyApp.csproj --configuration Release
        echo "‚úÖ –ü—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!"
    
    - name: üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞
      run: |
        echo "=========================================="
        echo "üéâ CI/CD –ü–ê–ô–ü–õ–ê–ô–ù –£–°–ü–ï–®–ù–û –í–´–ü–û–õ–ù–ï–ù! üéâ"
        echo "=========================================="
        echo "‚úÖ –ö–æ–¥ –∑–∞–≥—Ä—É–∂–µ–Ω"
        echo "‚úÖ .NET 8 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
        echo "‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"
        echo "‚úÖ –ü—Ä–æ–µ–∫—Ç—ã —Å–æ–±—Ä–∞–Ω—ã"
        echo "‚úÖ –¢–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã"
        echo "‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ"
        echo "=========================================="
        echo "üèÅ –í–°–ï –ü–†–û–í–ï–†–ö–ò –ü–†–û–ô–î–ï–ù–´ –£–°–ü–ï–®–ù–û!"
        echo "=========================================="
